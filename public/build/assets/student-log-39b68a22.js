(function(){$("#tabulator").length&&$("#tabulator-html-filter-submit-date").on("click",function(c){let n=$("#tabulator-html-filter-date").val();const[r,s]=n.split("-"),a=new Date(r),i=new Date(s);a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),i.setMinutes(i.getMinutes()-i.getTimezoneOffset());const d=a.toISOString().split("T")[0],f=i.toISOString().split("T")[0],l=new Tabulator("#tabulator",{ajaxURL:"https://staff.ndcotabato.info/student-log-tabulator",ajaxParams:{key1:d,key2:f},ajaxConfig:{method:"GET",mode:"cors",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","Content-type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"https://staff.ndcotabato.info"}},sortMode:"remote",groupBy:"logtype",groupValues:[["ENTRANCE","EXIT"]],printAsHtml:!0,printStyled:!0,pagination:!0,paginationSize:60,paginationSizeSelector:[10,20,30,40,100],layout:"fitColumns",responsiveLayout:"collapse",placeholder:"No matching records found",columns:[{title:"",formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!1,headerSort:!1},{title:"#",width:80,minWidth:40,responsive:1,field:"row",vertAlign:"middle",print:!0,download:!1,formatter:"rownum"},{title:"FULLNAME",minWidth:200,responsive:1,field:"fullname",vertAlign:"middle",print:!0,download:!1,formatter(t){const e=t.getData();return`<div>
                        <div class="font-medium whitespace-nowrap">${e.fullname}</div>
                        <div class="text-xs text-slate-500 whitespace-nowrap">${e.lrn}</div>
                    </div>`}},{title:"GRADE/SECTION",minWidth:200,field:"grade",responsive:1,hozAlign:"start",headerHozAlign:"start",vertAlign:"middle",print:!0,download:!1,formatter(t){const e=t.getData();return`<div>
                        <div class="font-medium whitespace-nowrap">${e.grade}</div>
                        <div class="text-xs text-slate-500 whitespace-nowrap">${e.section}</div>
                    </div>`}},{title:"LOG DATE",minWidth:200,field:"logdate",responsive:1,hozAlign:"start",headerHozAlign:"start",vertAlign:"middle",print:!0,download:!1,formatter(t){const e=t.getData();return`<div>
                        <div class="font-medium whitespace-nowrap">${e.logtime}</div>
                        <div class="text-xs text-slate-500 whitespace-nowrap">${e.logdate}</div>
                    </div>`}},{title:"LRN",field:"lrn",visible:!1,print:!1,download:!0},{title:"FULLNAME",field:"fullname",visible:!1,print:!1,download:!0},{title:"GRADE",field:"grade",visible:!1,print:!1,download:!0},{title:"SECTION",field:"section",visible:!1,print:!1,download:!0},{title:"LOG TIME",field:"logtime",visible:!1,print:!1,download:!0},{title:"LOG DATE",field:"logdate",visible:!1,print:!1,download:!0},{title:"LOG TYPE",field:"logtype",visible:!1,print:!1,download:!0}]});l.on("renderComplete",()=>{createIcons({icons,attrs:{"stroke-width":1.5},nameAttr:"data-lucide"})}),window.addEventListener("resize",()=>{l.redraw(),createIcons({icons,"stroke-width":1.5,nameAttr:"data-lucide"})});function o(){let t=$("#tabulator-html-filter-field").val(),e=$("#tabulator-html-filter-type").val(),u=$("#tabulator-html-filter-value").val();l.setFilter(t,e,u)}$("#tabulator-html-filter-form")[0].addEventListener("keypress",function(t){(t.keyCode?t.keyCode:t.which)=="13"&&(t.preventDefault(),o())}),$("#tabulator-html-filter-go").on("click",function(t){o()}),$("#tabulator-html-filter-reset").on("click",function(t){$("#tabulator-html-filter-field").val("fullname"),$("#tabulator-html-filter-type").val("like"),$("#tabulator-html-filter-value").val(""),o()}),$("#tabulator-export-csv").on("click",function(t){l.download("csv","student_log.csv")}),$("#tabulator-export-xlsx").on("click",function(t){l.download("xlsx","student_log.xlsx",{sheetName:"student_log"})}),$("#tabulator-print").on("click",function(t){l.print()})})})();
