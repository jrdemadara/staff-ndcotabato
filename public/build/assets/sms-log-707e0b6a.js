(function(){if($("#tabulator").length){let i=$("#tabulator-html-filter-date").val();const[r,n]=i.split("-"),o=new Date(r),s=new Date(n),d=o.toISOString().split("T")[0],c=s.toISOString().split("T")[0];$("#tabulator-html-filter-submit-date").on("click",function(f){const l=new Tabulator("#tabulator",{ajaxURL:"http://127.0.0.1:8000/sms-log-tabulator",ajaxParams:{key1:d,key2:c},ajaxConfig:{method:"GET",mode:"cors",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","Content-type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"http://127.0.0.1:8000"}},sortMode:"remote",groupBy:"logtype",groupValues:[["ENTRANCE","EXIT"]],printAsHtml:!0,printStyled:!0,pagination:!0,paginationSize:60,paginationSizeSelector:[10,20,30,40,100],layout:"fitColumns",responsiveLayout:"collapse",placeholder:"No matching records found",columns:[{title:"",formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!1,headerSort:!1},{title:"#",width:80,minWidth:40,responsive:1,field:"row",vertAlign:"middle",print:!0,download:!1,formatter:"rownum"},{title:"MESSAGE",minWidth:300,responsive:1,field:"message",vertAlign:"middle",print:!1,download:!1,formatter(t){return`<div>
                        <div class="flex items-center justify-center">
                            <i data-lucide="message-circle" class="w-4 h-4 mr-2 text-primary"></i>
                            ${t.getData().message}
                        </div>
                    </div>`}},{title:"CONTACT NUMBER",width:200,minWidth:100,field:"contactno",responsive:1,hozAlign:"start",headerHozAlign:"start",vertAlign:"middle",print:!1,download:!1,formatter(t){return`<div>
                        <div class="flex items-center justify-center">
                            <i data-lucide="smartphone" class="w-4 h-4 mr-2 text-warning"></i>
                            ${t.getData().contactno}
                        </div>
                    </div>`}},{title:"LOG DATE",width:200,minWidth:100,field:"datecreated",responsive:1,hozAlign:"start",headerHozAlign:"start",vertAlign:"middle",print:!1,download:!1,formatter(t){const e=t.getData();return`<div>
                        <div class="flex items-center justify-center">
                            <i data-lucide="calendar" class="w-4 h-4 mr-2 text-blue-600"></i>
                            ${e.datecreated}
                        </div>
                        <div class="flex items-center justify-center">
                            <i data-lucide="send" class="w-4 h-4 mr-2 text-green-600"></i>
                            ${e.datetimesend}
                        </div>
                    </div>`}},{title:"MESSAGE",field:"message",visible:!1,print:!0,download:!0},{title:"CONTACT NUMBER",field:"contactno",visible:!1,print:!0,download:!0},{title:"SMS DRAWER",field:"smsdrawer",visible:!1,print:!1,download:!0},{title:"DATE CREATED",field:"datecreated",visible:!1,print:!0,download:!0},{title:"DATE TIME SEND",field:"datetimesend",visible:!1,print:!0,download:!0},{title:"LOG TYPE",field:"logtype",visible:!1,print:!0,download:!0}]});l.on("renderComplete",()=>{createIcons({icons,attrs:{"stroke-width":1.5},nameAttr:"data-lucide"})}),window.addEventListener("resize",()=>{l.redraw(),createIcons({icons,"stroke-width":1.5,nameAttr:"data-lucide"})});function a(){let t=$("#tabulator-html-filter-field").val(),e=$("#tabulator-html-filter-type").val(),u=$("#tabulator-html-filter-value").val();l.setFilter(t,e,u)}$("#tabulator-html-filter-form")[0].addEventListener("keypress",function(t){(t.keyCode?t.keyCode:t.which)=="13"&&(t.preventDefault(),a())}),$("#tabulator-html-filter-go").on("click",function(t){a()}),$("#tabulator-html-filter-reset").on("click",function(t){$("#tabulator-html-filter-field").val("fullname"),$("#tabulator-html-filter-type").val("like"),$("#tabulator-html-filter-value").val(""),a()}),$("#tabulator-export-csv").on("click",function(t){l.download("csv","student_log.csv")}),$("#tabulator-export-xlsx").on("click",function(t){l.download("xlsx","student_log.xlsx",{sheetName:"student_log"})}),$("#tabulator-print").on("click",function(t){l.print()})})}})();
